<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boardriding Maui Maliko</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <div class="card">
          <div class="card-header">
            <h1 class="card-title">Boardriding Maui Maliko</h1>
          </div>
          <div class="card-content">
            <img src="/images/parawings/BRM-Maliko-123.jpg.webp" alt="Boardriding Maui Maliko Image" class="profile-logo">
            <p><a href="https://boardridingmaui.com/pages/parawing" target="_blank">Website</a></p>

            <h2>Sizes</h2>
            <div class="table-container">
                <table id="table">
                    <thead>
                        <tr>
                            <th>Area (mÂ²)</th>
                            
                            
                            
                            
                            <th>Skin</th>
                            <th>List Price (USD)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
    <td>1.8</td>
    
    
    
    
    <td>Single</td>
    <td>$900.00</td>
</tr>
<tr>
    <td>2.9</td>
    
    
    
    
    <td>Single</td>
    <td>$975.00</td>
</tr>
<tr>
    <td>4.0</td>
    
    
    
    
    <td>Single</td>
    <td>$1050.00</td>
</tr>
<tr>
    <td>5.1</td>
    
    
    
    
    <td>Single</td>
    <td>$1125.00</td>
</tr>
<tr>
    <td>6.2</td>
    
    
    
    
    <td>Single</td>
    <td>$1200.00</td>
</tr>
                    </tbody>
                </table>
            </div>

            <div class="results-count">
                <span>All sizes are missing values for:
                    Wingspan, Lines Length, Aspect Ratio, Weight
                </span>
            </div>
            <br>
            <h2>Comments, Reviews, Videos</h2>
            <p>Coming soon!</p>
            <h2>Videos</h2>
            <div id="videos"></div>

            <form action="/submit-video.php" method="POST">
                <input type="hidden" name="brandName" id="brandName" value="Boardriding Maui">
                <input type="hidden" name="name" id="name" value="Maliko">
                <div>
                    <label>
                        Video URL (YouTube or Instagram Reel):
                        <input name="videoUrl" id="videoUrl" type="url" required>
                    </label>
                </div>
                <div class="bottom-button">
                    <button type="submit" class="main-button">Submit Video</button>
                </div>
            </form>
        </div>
    </div>
    <script>
        
async function loadVideos() {
  const res = await fetch("/parawings.json");
  const parawings = await res.json();
  const videoContainer = document.getElementById("videos");
  const allVideos = parawings.flatMap(
    (p) => p.videos?.map((v) => ({ ...v, name: p.name })) || [],
  );
  allVideos.sort((a, b) => new Date(b.date) - new Date(a.date));
  allVideos.forEach((video) => {
    const wrapper = document.createElement("div");
    wrapper.style.marginBottom = "2em";
    
    let embed;
    if (video.kind === "YouTube") {
      // Extract video ID from either youtu.be format or youtube.com format
      let videoId;
      try {
        const url = new URL(video.url);
        if (url.hostname === 'youtu.be') {
          // Format: https://youtu.be/dQw4w9WgXcQ
          videoId = url.pathname.substring(1); // Remove the leading '/'
        } else {
          // Format: https://www.youtube.com/watch?v=dQw4w9WgXcQ
          videoId = url.searchParams.get("v");
        }

        if (videoId) {
          embed = document.createElement("iframe");
          embed.src = `https://www.youtube-nocookie.com/embed/${videoId}`;
          embed.allow =
            "accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture";
          embed.loading = "lazy";
        } else {
          console.warn("Could not extract video ID from YouTube URL:", video.url);
        }
      } catch (e) {
        console.warn("Invalid YouTube URL:", video.url, e);
      }
    } else if (video.kind === "Insta") {
      try {
        const url = new URL(video.url);
        const path = url.pathname.split('/').filter(Boolean); // e.g., ["reel", "DEHSDqQoJKe"]
        if (path.length >= 2) {
          const embedUrl = `https://www.instagram.com/${path[0]}/${path[1]}/embed`;
          embed = document.createElement('iframe');
          embed.src = embedUrl;
          embed.loading = "lazy";
          embed.scrolling = "no";
        }
      } catch (e) {
        console.warn("Invalid Instagram URL:", video.url);
      }
    }
    if (embed) {
      embed.width = "100%";
      embed.height = video.kind === "Insta" ? "800" : "337.5";
      embed.style.border = "none";
      embed.style.maxWidth = "600px";
      wrapper.appendChild(embed);
    }
    videoContainer.appendChild(wrapper);
  });
}
window.addEventListener("DOMContentLoaded", loadVideos);
    </script>
</body>
</html>